<!DOCTYPE HTML> 
<html lang="en"> 
<head> 
	<title>SRJS: Vision Example</title> 
	<meta charset="utf-8"> 
	<link rel="stylesheet" type="text/css" href="css/SRJS.css" />
	<script type="text/javascript" src="../build/SRJS-full.js"></script>

</head> 
<body>
<script type="text/javascript">
// See https://www.studentrobotics.org/docs/programming/sr/vision/
// Port of the following code:
// motor[0].target = 40
// motor[1].target = 50
// while True:
	// ev = yield vision
	// if ev.was(vision):
		// for blob in ev.vision.blobs:
			// if blob.colour == GREEN:
				// print "Found red blob at " + str(blob.x) + ", " + str(blob.y)

// enable the robot vision
SRJS.robotVision = true;
SRJS.Init( 2011 );

var initFunct = function(){
	
	robot.motor[0].target = 40;
	robot.motor[1].target = 50;
	
};

var mainFunct = function(){
	
	// store the robot's vision in a variable
	var vision = robot.vision;
	// loop through each of the blobs
	vision.blobs.forEach(function( blob ){
		// output something if a green blob is detected
		if( blob.colour === SRJS.GREEN ){
			console.log( 'Found green blob at', blob.x, ',', blob.y );
		}
	}, robot); // pass 'robot' as the second parameter of forEach() to reduce unexpected bugs
	
};

var args = {
	initialise: initFunct,
	main: mainFunct
};

SRJS.CURRENT_ARENA.addRobot( args );
// add a second robot so that the first one has something to look at
SRJS.CURRENT_ARENA.addRobot();
</script>
</body> 
</html>
